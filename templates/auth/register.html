{% extends "base.html" %}
{% block content %}

<h2>Register</h2>

<form method="POST">
    <label>Select Role:</label>
    <select name="role" id="roleSelect" required>
        <option value="">--Select--</option>
        <option value="patient">Patient</option>
        <option value="doctor">Doctor</option>
    </select>
    <label>Name:</label>
    <input type="text" name="name" required>
    <label>Email:</label>
    <input type="email" name="email" required>
    <label>Password:</label>
    <input type="password" name="password" required>
    <div id="patientFields" style="display:none;">
        <label>Age:</label>
        <input type="number" name="age">
        <label>Gender:</label>
        <select name="gender">
            <option value="">Select</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
        <label>Phone:</label>
        <input type="text" name="phone">
        <label>Address:</label>
        <input type="text" name="address">
    </div>
    <div id="doctorFields" style="display:none;">
        <label>Specialization:</label>
        <input type="text" name="specialization" placeholder="Ex: Cardiologist">
        <label>Department:</label>
        <select name="department_id">
            <option value="">Select Department</option>
            {% for d in departments %}
            <option value="{{ d.id }}">{{ d.name }}</option>
            {% endfor %}
        </select>
    </div>
    <button type="submit" class="btn-green">Register</button>
</form>
<script>
document.getElementById("roleSelect").addEventListener("change", function() {
    // this is for dyanmically changing the registration so when we click an option it shows therequired fields for that stakeholder
    let role = this.value;
    document.getElementById("patientFields").style.display =
        role === "patient" ? "block" : "none";
    document.getElementById("doctorFields").style.display =
        role === "doctor" ? "block" : "none";
});
</script>

{% endblock %}
